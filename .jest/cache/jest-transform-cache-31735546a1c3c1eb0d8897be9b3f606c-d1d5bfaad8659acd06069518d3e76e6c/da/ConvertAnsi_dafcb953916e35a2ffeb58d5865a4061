7837b7d39d2b240468f4a834b0bd2b54
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = exports.serialize = exports.test = void 0;

var _ansiRegex = _interopRequireDefault(require('ansi-regex'));

var _ansiStyles = _interopRequireDefault(require('ansi-styles'));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

var toHumanReadableAnsi = function toHumanReadableAnsi(text) {
  return text.replace((0, _ansiRegex.default)(), function (match) {
    switch (match) {
      case _ansiStyles.default.red.close:
      case _ansiStyles.default.green.close:
      case _ansiStyles.default.cyan.close:
      case _ansiStyles.default.gray.close:
      case _ansiStyles.default.white.close:
      case _ansiStyles.default.yellow.close:
      case _ansiStyles.default.bgRed.close:
      case _ansiStyles.default.bgGreen.close:
      case _ansiStyles.default.bgYellow.close:
      case _ansiStyles.default.inverse.close:
      case _ansiStyles.default.dim.close:
      case _ansiStyles.default.bold.close:
      case _ansiStyles.default.reset.open:
      case _ansiStyles.default.reset.close:
        return '</>';

      case _ansiStyles.default.red.open:
        return '<red>';

      case _ansiStyles.default.green.open:
        return '<green>';

      case _ansiStyles.default.cyan.open:
        return '<cyan>';

      case _ansiStyles.default.gray.open:
        return '<gray>';

      case _ansiStyles.default.white.open:
        return '<white>';

      case _ansiStyles.default.yellow.open:
        return '<yellow>';

      case _ansiStyles.default.bgRed.open:
        return '<bgRed>';

      case _ansiStyles.default.bgGreen.open:
        return '<bgGreen>';

      case _ansiStyles.default.bgYellow.open:
        return '<bgYellow>';

      case _ansiStyles.default.inverse.open:
        return '<inverse>';

      case _ansiStyles.default.dim.open:
        return '<dim>';

      case _ansiStyles.default.bold.open:
        return '<bold>';

      default:
        return '';
    }
  });
};

var test = function test(val) {
  return typeof val === 'string' && !!val.match((0, _ansiRegex.default)());
};

exports.test = test;

var serialize = function serialize(val, config, indentation, depth, refs, printer) {
  return printer(toHumanReadableAnsi(val), config, indentation, depth, refs);
};

exports.serialize = serialize;
var plugin = {
  serialize: serialize,
  test: test
};
var _default = plugin;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbnZlcnRBbnNpLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsInNlcmlhbGl6ZSIsInRlc3QiLCJfYW5zaVJlZ2V4IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYW5zaVN0eWxlcyIsIm9iaiIsIl9fZXNNb2R1bGUiLCJ0b0h1bWFuUmVhZGFibGVBbnNpIiwidGV4dCIsInJlcGxhY2UiLCJtYXRjaCIsInJlZCIsImNsb3NlIiwiZ3JlZW4iLCJjeWFuIiwiZ3JheSIsIndoaXRlIiwieWVsbG93IiwiYmdSZWQiLCJiZ0dyZWVuIiwiYmdZZWxsb3ciLCJpbnZlcnNlIiwiZGltIiwiYm9sZCIsInJlc2V0Iiwib3BlbiIsInZhbCIsImNvbmZpZyIsImluZGVudGF0aW9uIiwiZGVwdGgiLCJyZWZzIiwicHJpbnRlciIsInBsdWdpbiIsIl9kZWZhdWx0Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztBQUMzQ0MsRUFBQUEsS0FBSyxFQUFFO0FBRG9DLENBQTdDO0FBR0FELE9BQU8sQ0FBQ0UsT0FBUixHQUFrQkYsT0FBTyxDQUFDRyxTQUFSLEdBQW9CSCxPQUFPLENBQUNJLElBQVIsR0FBZSxLQUFLLENBQTFEOztBQUVBLElBQUlDLFVBQVUsR0FBR0Msc0JBQXNCLENBQUNDLE9BQU8sQ0FBQyxZQUFELENBQVIsQ0FBdkM7O0FBRUEsSUFBSUMsV0FBVyxHQUFHRixzQkFBc0IsQ0FBQ0MsT0FBTyxDQUFDLGFBQUQsQ0FBUixDQUF4Qzs7QUFFQSxTQUFTRCxzQkFBVCxDQUFnQ0csR0FBaEMsRUFBcUM7QUFDbkMsU0FBT0EsR0FBRyxJQUFJQSxHQUFHLENBQUNDLFVBQVgsR0FBd0JELEdBQXhCLEdBQThCO0FBQUNQLElBQUFBLE9BQU8sRUFBRU87QUFBVixHQUFyQztBQUNEOztBQVFE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R0F6REQsQ0FEOEI7QUFBQSxDQUFoQzs7QUE0REEsSUFBTXpCLElBQUksR0FBRyxTQUFQQSxJQUFPLENBQUEwQixHQUFHO0FBQUEsU0FDZCxPQUFPQSxHQUFQLEtBQWUsUUFBZixJQUEyQixDQUFDLENBQUNBLEdBQUcsQ0FBQ2hCLEtBQUosQ0FBVSxDQUFDLEdBQUdULFVBQVUsQ0FBQ0gsT0FBZixHQUFWLENBRGY7QUFBQSxDQUFoQjs7QUFHQUYsT0FBTyxDQUFDSSxJQUFSLEdBQWVBLElBQWY7O0FBRUEsSUFBTUQsU0FBUyxHQUFHLFNBQVpBLFNBQVksQ0FBQzJCLEdBQUQsRUFBTUMsTUFBTixFQUFjQyxXQUFkLEVBQTJCQyxLQUEzQixFQUFrQ0MsSUFBbEMsRUFBd0NDLE9BQXhDO0FBQUEsU0FDaEJBLE9BQU8sQ0FBQ3hCLG1CQUFtQixDQUFDbUIsR0FBRCxDQUFwQixFQUEyQkMsTUFBM0IsRUFBbUNDLFdBQW5DLEVBQWdEQyxLQUFoRCxFQUF1REMsSUFBdkQsQ0FEUztBQUFBLENBQWxCOztBQUdBbEMsT0FBTyxDQUFDRyxTQUFSLEdBQW9CQSxTQUFwQjtBQUNBLElBQU1pQyxNQUFNLEdBQUc7QUFDYmpDLEVBQUFBLFNBQVMsRUFBVEEsU0FEYTtBQUViQyxFQUFBQSxJQUFJLEVBQUpBO0FBRmEsQ0FBZjtBQUlBLElBQUlpQyxRQUFRLEdBQUdELE1BQWY7QUFDQXBDLE9BQU8sQ0FBQ0UsT0FBUixHQUFrQm1DLFFBQWxCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGV4cG9ydHMuc2VyaWFsaXplID0gZXhwb3J0cy50ZXN0ID0gdm9pZCAwO1xuXG52YXIgX2Fuc2lSZWdleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgnYW5zaS1yZWdleCcpKTtcblxudmFyIF9hbnNpU3R5bGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCdhbnNpLXN0eWxlcycpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtkZWZhdWx0OiBvYmp9O1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5jb25zdCB0b0h1bWFuUmVhZGFibGVBbnNpID0gdGV4dCA9PlxuICB0ZXh0LnJlcGxhY2UoKDAsIF9hbnNpUmVnZXguZGVmYXVsdCkoKSwgbWF0Y2ggPT4ge1xuICAgIHN3aXRjaCAobWF0Y2gpIHtcbiAgICAgIGNhc2UgX2Fuc2lTdHlsZXMuZGVmYXVsdC5yZWQuY2xvc2U6XG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQuZ3JlZW4uY2xvc2U6XG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQuY3lhbi5jbG9zZTpcbiAgICAgIGNhc2UgX2Fuc2lTdHlsZXMuZGVmYXVsdC5ncmF5LmNsb3NlOlxuICAgICAgY2FzZSBfYW5zaVN0eWxlcy5kZWZhdWx0LndoaXRlLmNsb3NlOlxuICAgICAgY2FzZSBfYW5zaVN0eWxlcy5kZWZhdWx0LnllbGxvdy5jbG9zZTpcbiAgICAgIGNhc2UgX2Fuc2lTdHlsZXMuZGVmYXVsdC5iZ1JlZC5jbG9zZTpcbiAgICAgIGNhc2UgX2Fuc2lTdHlsZXMuZGVmYXVsdC5iZ0dyZWVuLmNsb3NlOlxuICAgICAgY2FzZSBfYW5zaVN0eWxlcy5kZWZhdWx0LmJnWWVsbG93LmNsb3NlOlxuICAgICAgY2FzZSBfYW5zaVN0eWxlcy5kZWZhdWx0LmludmVyc2UuY2xvc2U6XG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQuZGltLmNsb3NlOlxuICAgICAgY2FzZSBfYW5zaVN0eWxlcy5kZWZhdWx0LmJvbGQuY2xvc2U6XG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQucmVzZXQub3BlbjpcbiAgICAgIGNhc2UgX2Fuc2lTdHlsZXMuZGVmYXVsdC5yZXNldC5jbG9zZTpcbiAgICAgICAgcmV0dXJuICc8Lz4nO1xuXG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQucmVkLm9wZW46XG4gICAgICAgIHJldHVybiAnPHJlZD4nO1xuXG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQuZ3JlZW4ub3BlbjpcbiAgICAgICAgcmV0dXJuICc8Z3JlZW4+JztcblxuICAgICAgY2FzZSBfYW5zaVN0eWxlcy5kZWZhdWx0LmN5YW4ub3BlbjpcbiAgICAgICAgcmV0dXJuICc8Y3lhbj4nO1xuXG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQuZ3JheS5vcGVuOlxuICAgICAgICByZXR1cm4gJzxncmF5Pic7XG5cbiAgICAgIGNhc2UgX2Fuc2lTdHlsZXMuZGVmYXVsdC53aGl0ZS5vcGVuOlxuICAgICAgICByZXR1cm4gJzx3aGl0ZT4nO1xuXG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQueWVsbG93Lm9wZW46XG4gICAgICAgIHJldHVybiAnPHllbGxvdz4nO1xuXG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQuYmdSZWQub3BlbjpcbiAgICAgICAgcmV0dXJuICc8YmdSZWQ+JztcblxuICAgICAgY2FzZSBfYW5zaVN0eWxlcy5kZWZhdWx0LmJnR3JlZW4ub3BlbjpcbiAgICAgICAgcmV0dXJuICc8YmdHcmVlbj4nO1xuXG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQuYmdZZWxsb3cub3BlbjpcbiAgICAgICAgcmV0dXJuICc8YmdZZWxsb3c+JztcblxuICAgICAgY2FzZSBfYW5zaVN0eWxlcy5kZWZhdWx0LmludmVyc2Uub3BlbjpcbiAgICAgICAgcmV0dXJuICc8aW52ZXJzZT4nO1xuXG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQuZGltLm9wZW46XG4gICAgICAgIHJldHVybiAnPGRpbT4nO1xuXG4gICAgICBjYXNlIF9hbnNpU3R5bGVzLmRlZmF1bHQuYm9sZC5vcGVuOlxuICAgICAgICByZXR1cm4gJzxib2xkPic7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0pO1xuXG5jb25zdCB0ZXN0ID0gdmFsID0+XG4gIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnICYmICEhdmFsLm1hdGNoKCgwLCBfYW5zaVJlZ2V4LmRlZmF1bHQpKCkpO1xuXG5leHBvcnRzLnRlc3QgPSB0ZXN0O1xuXG5jb25zdCBzZXJpYWxpemUgPSAodmFsLCBjb25maWcsIGluZGVudGF0aW9uLCBkZXB0aCwgcmVmcywgcHJpbnRlcikgPT5cbiAgcHJpbnRlcih0b0h1bWFuUmVhZGFibGVBbnNpKHZhbCksIGNvbmZpZywgaW5kZW50YXRpb24sIGRlcHRoLCByZWZzKTtcblxuZXhwb3J0cy5zZXJpYWxpemUgPSBzZXJpYWxpemU7XG5jb25zdCBwbHVnaW4gPSB7XG4gIHNlcmlhbGl6ZSxcbiAgdGVzdFxufTtcbnZhciBfZGVmYXVsdCA9IHBsdWdpbjtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuIl19