890efea55ee24e9f05ecf6d247605c6c
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var ANSI_BACKGROUND_OFFSET = 10;

var wrapAnsi256 = function wrapAnsi256() {
  var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  return function (code) {
    return "\x1B[" + (38 + offset) + ";5;" + code + "m";
  };
};

var wrapAnsi16m = function wrapAnsi16m() {
  var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  return function (red, green, blue) {
    return "\x1B[" + (38 + offset) + ";2;" + red + ";" + green + ";" + blue + "m";
  };
};

function assembleStyles() {
  var codes = new Map();
  var styles = {
    modifier: {
      reset: [0, 0],
      bold: [1, 22],
      dim: [2, 22],
      italic: [3, 23],
      underline: [4, 24],
      overline: [53, 55],
      inverse: [7, 27],
      hidden: [8, 28],
      strikethrough: [9, 29]
    },
    color: {
      black: [30, 39],
      red: [31, 39],
      green: [32, 39],
      yellow: [33, 39],
      blue: [34, 39],
      magenta: [35, 39],
      cyan: [36, 39],
      white: [37, 39],
      blackBright: [90, 39],
      redBright: [91, 39],
      greenBright: [92, 39],
      yellowBright: [93, 39],
      blueBright: [94, 39],
      magentaBright: [95, 39],
      cyanBright: [96, 39],
      whiteBright: [97, 39]
    },
    bgColor: {
      bgBlack: [40, 49],
      bgRed: [41, 49],
      bgGreen: [42, 49],
      bgYellow: [43, 49],
      bgBlue: [44, 49],
      bgMagenta: [45, 49],
      bgCyan: [46, 49],
      bgWhite: [47, 49],
      bgBlackBright: [100, 49],
      bgRedBright: [101, 49],
      bgGreenBright: [102, 49],
      bgYellowBright: [103, 49],
      bgBlueBright: [104, 49],
      bgMagentaBright: [105, 49],
      bgCyanBright: [106, 49],
      bgWhiteBright: [107, 49]
    }
  };
  styles.color.gray = styles.color.blackBright;
  styles.bgColor.bgGray = styles.bgColor.bgBlackBright;
  styles.color.grey = styles.color.blackBright;
  styles.bgColor.bgGrey = styles.bgColor.bgBlackBright;

  for (var _i = 0, _Object$entries = Object.entries(styles); _i < _Object$entries.length; _i++) {
    var _ref = _Object$entries[_i];

    var _ref2 = (0, _slicedToArray2.default)(_ref, 2);

    var groupName = _ref2[0];
    var group = _ref2[1];

    for (var _i2 = 0, _Object$entries2 = Object.entries(group); _i2 < _Object$entries2.length; _i2++) {
      var _ref3 = _Object$entries2[_i2];

      var _ref4 = (0, _slicedToArray2.default)(_ref3, 2);

      var styleName = _ref4[0];
      var style = _ref4[1];
      styles[styleName] = {
        open: "\x1B[" + style[0] + "m",
        close: "\x1B[" + style[1] + "m"
      };
      group[styleName] = styles[styleName];
      codes.set(style[0], style[1]);
    }

    Object.defineProperty(styles, groupName, {
      value: group,
      enumerable: false
    });
  }

  Object.defineProperty(styles, 'codes', {
    value: codes,
    enumerable: false
  });
  styles.color.close = "\x1B[39m";
  styles.bgColor.close = "\x1B[49m";
  styles.color.ansi256 = wrapAnsi256();
  styles.color.ansi16m = wrapAnsi16m();
  styles.bgColor.ansi256 = wrapAnsi256(ANSI_BACKGROUND_OFFSET);
  styles.bgColor.ansi16m = wrapAnsi16m(ANSI_BACKGROUND_OFFSET);
  Object.defineProperties(styles, {
    rgbToAnsi256: {
      value: function value(red, green, blue) {
        if (red === green && green === blue) {
          if (red < 8) {
            return 16;
          }

          if (red > 248) {
            return 231;
          }

          return Math.round((red - 8) / 247 * 24) + 232;
        }

        return 16 + 36 * Math.round(red / 255 * 5) + 6 * Math.round(green / 255 * 5) + Math.round(blue / 255 * 5);
      },
      enumerable: false
    },
    hexToRgb: {
      value: function value(hex) {
        var matches = /(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(hex.toString(16));

        if (!matches) {
          return [0, 0, 0];
        }

        var colorString = matches.groups.colorString;

        if (colorString.length === 3) {
          colorString = colorString.split('').map(function (character) {
            return character + character;
          }).join('');
        }

        var integer = Number.parseInt(colorString, 16);
        return [integer >> 16 & 0xFF, integer >> 8 & 0xFF, integer & 0xFF];
      },
      enumerable: false
    },
    hexToAnsi256: {
      value: function value(hex) {
        return styles.rgbToAnsi256.apply(styles, (0, _toConsumableArray2.default)(styles.hexToRgb(hex)));
      },
      enumerable: false
    }
  });
  return styles;
}

Object.defineProperty(module, 'exports', {
  enumerable: true,
  get: assembleStyles
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkFOU0lfQkFDS0dST1VORF9PRkZTRVQiLCJ3cmFwQW5zaTI1NiIsIm9mZnNldCIsImNvZGUiLCJ3cmFwQW5zaTE2bSIsInJlZCIsImdyZWVuIiwiYmx1ZSIsImFzc2VtYmxlU3R5bGVzIiwiY29kZXMiLCJNYXAiLCJzdHlsZXMiLCJtb2RpZmllciIsInJlc2V0IiwiYm9sZCIsImRpbSIsIml0YWxpYyIsInVuZGVybGluZSIsIm92ZXJsaW5lIiwiaW52ZXJzZSIsImhpZGRlbiIsInN0cmlrZXRocm91Z2giLCJjb2xvciIsImJsYWNrIiwieWVsbG93IiwibWFnZW50YSIsImN5YW4iLCJ3aGl0ZSIsImJsYWNrQnJpZ2h0IiwicmVkQnJpZ2h0IiwiZ3JlZW5CcmlnaHQiLCJ5ZWxsb3dCcmlnaHQiLCJibHVlQnJpZ2h0IiwibWFnZW50YUJyaWdodCIsImN5YW5CcmlnaHQiLCJ3aGl0ZUJyaWdodCIsImJnQ29sb3IiLCJiZ0JsYWNrIiwiYmdSZWQiLCJiZ0dyZWVuIiwiYmdZZWxsb3ciLCJiZ0JsdWUiLCJiZ01hZ2VudGEiLCJiZ0N5YW4iLCJiZ1doaXRlIiwiYmdCbGFja0JyaWdodCIsImJnUmVkQnJpZ2h0IiwiYmdHcmVlbkJyaWdodCIsImJnWWVsbG93QnJpZ2h0IiwiYmdCbHVlQnJpZ2h0IiwiYmdNYWdlbnRhQnJpZ2h0IiwiYmdDeWFuQnJpZ2h0IiwiYmdXaGl0ZUJyaWdodCIsImdyYXkiLCJiZ0dyYXkiLCJncmV5IiwiYmdHcmV5IiwiT2JqZWN0IiwiZW50cmllcyIsImdyb3VwTmFtZSIsImdyb3VwIiwic3R5bGVOYW1lIiwic3R5bGUiLCJvcGVuIiwiY2xvc2UiLCJzZXQiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW51bWVyYWJsZSIsImFuc2kyNTYiLCJhbnNpMTZtIiwiZGVmaW5lUHJvcGVydGllcyIsInJnYlRvQW5zaTI1NiIsIk1hdGgiLCJyb3VuZCIsImhleFRvUmdiIiwiaGV4IiwibWF0Y2hlcyIsImV4ZWMiLCJ0b1N0cmluZyIsImNvbG9yU3RyaW5nIiwiZ3JvdXBzIiwibGVuZ3RoIiwic3BsaXQiLCJtYXAiLCJjaGFyYWN0ZXIiLCJqb2luIiwiaW50ZWdlciIsIk51bWJlciIsInBhcnNlSW50IiwiaGV4VG9BbnNpMjU2IiwibW9kdWxlIiwiZ2V0Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7QUFFQSxJQUFNQSxzQkFBc0IsR0FBRyxFQUEvQjs7QUFFQSxJQUFNQyxXQUFXLEdBQUcsU0FBZEEsV0FBYztBQUFBLE1BQUNDLE1BQUQsdUVBQVUsQ0FBVjtBQUFBLFNBQWdCLFVBQUFDLElBQUk7QUFBQSxzQkFBYyxLQUFLRCxNQUFuQixZQUErQkMsSUFBL0I7QUFBQSxHQUFwQjtBQUFBLENBQXBCOztBQUVBLElBQU1DLFdBQVcsR0FBRyxTQUFkQSxXQUFjO0FBQUEsTUFBQ0YsTUFBRCx1RUFBVSxDQUFWO0FBQUEsU0FBZ0IsVUFBQ0csR0FBRCxFQUFNQyxLQUFOLEVBQWFDLElBQWI7QUFBQSxzQkFBZ0MsS0FBS0wsTUFBckMsWUFBaURHLEdBQWpELFNBQXdEQyxLQUF4RCxTQUFpRUMsSUFBakU7QUFBQSxHQUFoQjtBQUFBLENBQXBCOztBQUVBLFNBQVNDLGNBQVQsR0FBMEI7QUFDekIsTUFBTUMsS0FBSyxHQUFHLElBQUlDLEdBQUosRUFBZDtBQUNBLE1BQU1DLE1BQU0sR0FBRztBQUNkQyxJQUFBQSxRQUFRLEVBQUU7QUFDVEMsTUFBQUEsS0FBSyxFQUFFLENBQUMsQ0FBRCxFQUFJLENBQUosQ0FERTtBQUdUQyxNQUFBQSxJQUFJLEVBQUUsQ0FBQyxDQUFELEVBQUksRUFBSixDQUhHO0FBSVRDLE1BQUFBLEdBQUcsRUFBRSxDQUFDLENBQUQsRUFBSSxFQUFKLENBSkk7QUFLVEMsTUFBQUEsTUFBTSxFQUFFLENBQUMsQ0FBRCxFQUFJLEVBQUosQ0FMQztBQU1UQyxNQUFBQSxTQUFTLEVBQUUsQ0FBQyxDQUFELEVBQUksRUFBSixDQU5GO0FBT1RDLE1BQUFBLFFBQVEsRUFBRSxDQUFDLEVBQUQsRUFBSyxF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TUFBQUEsVUFBVSxFQUFFO0FBckJILEtBeEJxQjtBQStDL0JzQixJQUFBQSxZQUFZLEVBQUU7QUFDYnZCLE1BQUFBLEtBQUssRUFBRSxlQUFBUyxHQUFHO0FBQUEsZUFBSWpFLE1BQU0sQ0FBQzZELFlBQVAsT0FBQTdELE1BQU0sbUNBQWlCQSxNQUFNLENBQUNnRSxRQUFQLENBQWdCQyxHQUFoQixDQUFqQixFQUFWO0FBQUEsT0FERztBQUViUixNQUFBQSxVQUFVLEVBQUU7QUFGQztBQS9DaUIsR0FBaEM7QUFxREEsU0FBT3pELE1BQVA7QUFDQTs7QUFHRDhDLE1BQU0sQ0FBQ1MsY0FBUCxDQUFzQnlCLE1BQXRCLEVBQThCLFNBQTlCLEVBQXlDO0FBQ3hDdkIsRUFBQUEsVUFBVSxFQUFFLElBRDRCO0FBRXhDd0IsRUFBQUEsR0FBRyxFQUFFcEY7QUFGbUMsQ0FBekMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IEFOU0lfQkFDS0dST1VORF9PRkZTRVQgPSAxMDtcblxuY29uc3Qgd3JhcEFuc2kyNTYgPSAob2Zmc2V0ID0gMCkgPT4gY29kZSA9PiBgXFx1MDAxQlskezM4ICsgb2Zmc2V0fTs1OyR7Y29kZX1tYDtcblxuY29uc3Qgd3JhcEFuc2kxNm0gPSAob2Zmc2V0ID0gMCkgPT4gKHJlZCwgZ3JlZW4sIGJsdWUpID0+IGBcXHUwMDFCWyR7MzggKyBvZmZzZXR9OzI7JHtyZWR9OyR7Z3JlZW59OyR7Ymx1ZX1tYDtcblxuZnVuY3Rpb24gYXNzZW1ibGVTdHlsZXMoKSB7XG5cdGNvbnN0IGNvZGVzID0gbmV3IE1hcCgpO1xuXHRjb25zdCBzdHlsZXMgPSB7XG5cdFx0bW9kaWZpZXI6IHtcblx0XHRcdHJlc2V0OiBbMCwgMF0sXG5cdFx0XHQvLyAyMSBpc24ndCB3aWRlbHkgc3VwcG9ydGVkIGFuZCAyMiBkb2VzIHRoZSBzYW1lIHRoaW5nXG5cdFx0XHRib2xkOiBbMSwgMjJdLFxuXHRcdFx0ZGltOiBbMiwgMjJdLFxuXHRcdFx0aXRhbGljOiBbMywgMjNdLFxuXHRcdFx0dW5kZXJsaW5lOiBbNCwgMjRdLFxuXHRcdFx0b3ZlcmxpbmU6IFs1MywgNTVdLFxuXHRcdFx0aW52ZXJzZTogWzcsIDI3XSxcblx0XHRcdGhpZGRlbjogWzgsIDI4XSxcblx0XHRcdHN0cmlrZXRocm91Z2g6IFs5LCAyOV1cblx0XHR9LFxuXHRcdGNvbG9yOiB7XG5cdFx0XHRibGFjazogWzMwLCAzOV0sXG5cdFx0XHRyZWQ6IFszMSwgMzldLFxuXHRcdFx0Z3JlZW46IFszMiwgMzldLFxuXHRcdFx0eWVsbG93OiBbMzMsIDM5XSxcblx0XHRcdGJsdWU6IFszNCwgMzldLFxuXHRcdFx0bWFnZW50YTogWzM1LCAzOV0sXG5cdFx0XHRjeWFuOiBbMzYsIDM5XSxcblx0XHRcdHdoaXRlOiBbMzcsIDM5XSxcblxuXHRcdFx0Ly8gQnJpZ2h0IGNvbG9yXG5cdFx0XHRibGFja0JyaWdodDogWzkwLCAzOV0sXG5cdFx0XHRyZWRCcmlnaHQ6IFs5MSwgMzldLFxuXHRcdFx0Z3JlZW5CcmlnaHQ6IFs5MiwgMzldLFxuXHRcdFx0eWVsbG93QnJpZ2h0OiBbOTMsIDM5XSxcblx0XHRcdGJsdWVCcmlnaHQ6IFs5NCwgMzldLFxuXHRcdFx0bWFnZW50YUJyaWdodDogWzk1LCAzOV0sXG5cdFx0XHRjeWFuQnJpZ2h0OiBbOTYsIDM5XSxcblx0XHRcdHdoaXRlQnJpZ2h0OiBbOTcsIDM5XVxuXHRcdH0sXG5cdFx0YmdDb2xvcjoge1xuXHRcdFx0YmdCbGFjazogWzQwLCA0OV0sXG5cdFx0XHRiZ1JlZDogWzQxLCA0OV0sXG5cdFx0XHRiZ0dyZWVuOiBbNDIsIDQ5XSxcblx0XHRcdGJnWWVsbG93OiBbNDMsIDQ5XSxcblx0XHRcdGJnQmx1ZTogWzQ0LCA0OV0sXG5cdFx0XHRiZ01hZ2VudGE6IFs0NSwgNDldLFxuXHRcdFx0YmdDeWFuOiBbNDYsIDQ5XSxcblx0XHRcdGJnV2hpdGU6IFs0NywgNDldLFxuXG5cdFx0XHQvLyBCcmlnaHQgY29sb3Jcblx0XHRcdGJnQmxhY2tCcmlnaHQ6IFsxMDAsIDQ5XSxcblx0XHRcdGJnUmVkQnJpZ2h0OiBbMTAxLCA0OV0sXG5cdFx0XHRiZ0dyZWVuQnJpZ2h0OiBbMTAyLCA0OV0sXG5cdFx0XHRiZ1llbGxvd0JyaWdodDogWzEwMywgNDldLFxuXHRcdFx0YmdCbHVlQnJpZ2h0OiBbMTA0LCA0OV0sXG5cdFx0XHRiZ01hZ2VudGFCcmlnaHQ6IFsxMDUsIDQ5XSxcblx0XHRcdGJnQ3lhbkJyaWdodDogWzEwNiwgNDldLFxuXHRcdFx0YmdXaGl0ZUJyaWdodDogWzEwNywgNDldXG5cdFx0fVxuXHR9O1xuXG5cdC8vIEFsaWFzIGJyaWdodCBibGFjayBhcyBncmF5IChhbmQgZ3JleSlcblx0c3R5bGVzLmNvbG9yLmdyYXkgPSBzdHlsZXMuY29sb3IuYmxhY2tCcmlnaHQ7XG5cdHN0eWxlcy5iZ0NvbG9yLmJnR3JheSA9IHN0eWxlcy5iZ0NvbG9yLmJnQmxhY2tCcmlnaHQ7XG5cdHN0eWxlcy5jb2xvci5ncmV5ID0gc3R5bGVzLmNvbG9yLmJsYWNrQnJpZ2h0O1xuXHRzdHlsZXMuYmdDb2xvci5iZ0dyZXkgPSBzdHlsZXMuYmdDb2xvci5iZ0JsYWNrQnJpZ2h0O1xuXG5cdGZvciAoY29uc3QgW2dyb3VwTmFtZSwgZ3JvdXBdIG9mIE9iamVjdC5lbnRyaWVzKHN0eWxlcykpIHtcblx0XHRmb3IgKGNvbnN0IFtzdHlsZU5hbWUsIHN0eWxlXSBvZiBPYmplY3QuZW50cmllcyhncm91cCkpIHtcblx0XHRcdHN0eWxlc1tzdHlsZU5hbWVdID0ge1xuXHRcdFx0XHRvcGVuOiBgXFx1MDAxQlske3N0eWxlWzBdfW1gLFxuXHRcdFx0XHRjbG9zZTogYFxcdTAwMUJbJHtzdHlsZVsxXX1tYFxuXHRcdFx0fTtcblxuXHRcdFx0Z3JvdXBbc3R5bGVOYW1lXSA9IHN0eWxlc1tzdHlsZU5hbWVdO1xuXG5cdFx0XHRjb2Rlcy5zZXQoc3R5bGVbMF0sIHN0eWxlWzFdKTtcblx0XHR9XG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoc3R5bGVzLCBncm91cE5hbWUsIHtcblx0XHRcdHZhbHVlOiBncm91cCxcblx0XHRcdGVudW1lcmFibGU6IGZhbHNlXG5cdFx0fSk7XG5cdH1cblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoc3R5bGVzLCAnY29kZXMnLCB7XG5cdFx0dmFsdWU6IGNvZGVzLFxuXHRcdGVudW1lcmFibGU6IGZhbHNlXG5cdH0pO1xuXG5cdHN0eWxlcy5jb2xvci5jbG9zZSA9ICdcXHUwMDFCWzM5bSc7XG5cdHN0eWxlcy5iZ0NvbG9yLmNsb3NlID0gJ1xcdTAwMUJbNDltJztcblxuXHRzdHlsZXMuY29sb3IuYW5zaTI1NiA9IHdyYXBBbnNpMjU2KCk7XG5cdHN0eWxlcy5jb2xvci5hbnNpMTZtID0gd3JhcEFuc2kxNm0oKTtcblx0c3R5bGVzLmJnQ29sb3IuYW5zaTI1NiA9IHdyYXBBbnNpMjU2KEFOU0lfQkFDS0dST1VORF9PRkZTRVQpO1xuXHRzdHlsZXMuYmdDb2xvci5hbnNpMTZtID0gd3JhcEFuc2kxNm0oQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7XG5cblx0Ly8gRnJvbSBodHRwczovL2dpdGh1Yi5jb20vUWl4LS9jb2xvci1jb252ZXJ0L2Jsb2IvM2YwZTBkNGU5MmUyMzU3OTZjY2IxN2Y2ZTg1YzcyMDk0YTY1MWY0OS9jb252ZXJzaW9ucy5qc1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHlsZXMsIHtcblx0XHRyZ2JUb0Fuc2kyNTY6IHtcblx0XHRcdHZhbHVlOiAocmVkLCBncmVlbiwgYmx1ZSkgPT4ge1xuXHRcdFx0XHQvLyBXZSB1c2UgdGhlIGV4dGVuZGVkIGdyZXlzY2FsZSBwYWxldHRlIGhlcmUsIHdpdGggdGhlIGV4Y2VwdGlvbiBvZlxuXHRcdFx0XHQvLyBibGFjayBhbmQgd2hpdGUuIG5vcm1hbCBwYWxldHRlIG9ubHkgaGFzIDQgZ3JleXNjYWxlIHNoYWRlcy5cblx0XHRcdFx0aWYgKHJlZCA9PT0gZ3JlZW4gJiYgZ3JlZW4gPT09IGJsdWUpIHtcblx0XHRcdFx0XHRpZiAocmVkIDwgOCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIDE2O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChyZWQgPiAyNDgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAyMzE7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgucm91bmQoKChyZWQgLSA4KSAvIDI0NykgKiAyNCkgKyAyMzI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gMTYgK1xuXHRcdFx0XHRcdCgzNiAqIE1hdGgucm91bmQocmVkIC8gMjU1ICogNSkpICtcblx0XHRcdFx0XHQoNiAqIE1hdGgucm91bmQoZ3JlZW4gLyAyNTUgKiA1KSkgK1xuXHRcdFx0XHRcdE1hdGgucm91bmQoYmx1ZSAvIDI1NSAqIDUpO1xuXHRcdFx0fSxcblx0XHRcdGVudW1lcmFibGU6IGZhbHNlXG5cdFx0fSxcblx0XHRoZXhUb1JnYjoge1xuXHRcdFx0dmFsdWU6IGhleCA9PiB7XG5cdFx0XHRcdGNvbnN0IG1hdGNoZXMgPSAvKD88Y29sb3JTdHJpbmc+W2EtZlxcZF17Nn18W2EtZlxcZF17M30pL2kuZXhlYyhoZXgudG9TdHJpbmcoMTYpKTtcblx0XHRcdFx0aWYgKCFtYXRjaGVzKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFswLCAwLCAwXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGxldCB7Y29sb3JTdHJpbmd9ID0gbWF0Y2hlcy5ncm91cHM7XG5cblx0XHRcdFx0aWYgKGNvbG9yU3RyaW5nLmxlbmd0aCA9PT0gMykge1xuXHRcdFx0XHRcdGNvbG9yU3RyaW5nID0gY29sb3JTdHJpbmcuc3BsaXQoJycpLm1hcChjaGFyYWN0ZXIgPT4gY2hhcmFjdGVyICsgY2hhcmFjdGVyKS5qb2luKCcnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGludGVnZXIgPSBOdW1iZXIucGFyc2VJbnQoY29sb3JTdHJpbmcsIDE2KTtcblxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdChpbnRlZ2VyID4+IDE2KSAmIDB4RkYsXG5cdFx0XHRcdFx0KGludGVnZXIgPj4gOCkgJiAweEZGLFxuXHRcdFx0XHRcdGludGVnZXIgJiAweEZGXG5cdFx0XHRcdF07XG5cdFx0XHR9LFxuXHRcdFx0ZW51bWVyYWJsZTogZmFsc2Vcblx0XHR9LFxuXHRcdGhleFRvQW5zaTI1Njoge1xuXHRcdFx0dmFsdWU6IGhleCA9PiBzdHlsZXMucmdiVG9BbnNpMjU2KC4uLnN0eWxlcy5oZXhUb1JnYihoZXgpKSxcblx0XHRcdGVudW1lcmFibGU6IGZhbHNlXG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG4vLyBNYWtlIHRoZSBleHBvcnQgaW1tdXRhYmxlXG5PYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCAnZXhwb3J0cycsIHtcblx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0Z2V0OiBhc3NlbWJsZVN0eWxlc1xufSk7XG4iXX0=